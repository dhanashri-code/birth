<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Birthday!</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#0f172a;
      --bg2:#1f2937;
      --accent1:#ff7ab6;
      --accent2:#ffd166;
      --card:#0b1220;
    }

    html,body{height:100%;margin:0;font-family: "Poppins", sans-serif;background: linear-gradient(180deg,var(--bg1),var(--bg2)); color:#fff; -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;overflow:hidden;}

    /* Center container */
    .wrap{
      position:relative;
      width:100%;
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:2rem;
      padding:3rem;
      box-sizing:border-box;
    }

    /* Birthday card */
    .card {
      width:420px;
      height:300px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:18px;
      box-shadow: 0 10px 30px rgba(2,6,23,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
      position:relative;
      overflow:visible;
      transform-origin:center left;
      transition:transform 600ms cubic-bezier(.22,.9,.33,1), height 400ms ease;
      cursor:pointer;
      padding:28px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
    }

    .card.open {
      transform: rotateY(-12deg) scale(1.02);
      height:420px;
    }

    .greeting {
      text-align:center;
      user-select:none;
    }

    .small {
      color: rgba(255,255,255,0.7);
      font-weight:500;
      letter-spacing:0.08em;
      font-size:12px;
      text-transform:uppercase;
      margin-bottom:8px;
    }

    .title {
      font-size:36px;
      font-weight:800;
      margin:0;
      line-height:1;
      letter-spacing:-0.02em;
    }

    .name {
      font-family: "Dancing Script", cursive;
      font-size:48px;
      margin-top:6px;
      color:var(--accent1);
      text-shadow: 0 6px 18px rgba(255,122,182,0.08);
    }

    .message {
      margin-top:18px;
      color:rgba(255,255,255,0.85);
      font-size:15px;
      line-height:1.4;
      max-width:320px;
    }

    .open-hint {
      margin-top:12px;
      color: rgba(255,255,255,0.55);
      font-size:13px;
    }

    /* Cake - simple layered circles */
    .cake {
      margin-top:18px;
      width:160px;
      height:120px;
      position:relative;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .cake .plate{
      position:absolute;
      bottom:-10px;
      width:200px;
      height:12px;
      background:linear-gradient(90deg,#b8d8ff22,#b8d8ff11);
      border-radius:999px;
      filter: blur(1px);
    }
    .cake .tier {
      position:absolute;
      bottom:0;
      width:140px;
      height:70px;
      background: linear-gradient(180deg,#ffb3d3,#ff8fc3);
      border-radius:12px;
      box-shadow:0 10px 25px rgba(0,0,0,0.35), inset 0 3px 0 rgba(255,255,255,0.12);
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }
    .cake .tier:before{
      content:"";
      position:absolute;
      inset:0;
      background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.0));
      mix-blend-mode:overlay;
    }
    .candle {
      position:absolute;
      top:-18px;
      width:8px;
      height:28px;
      background:#ffe089;
      border-radius:3px;
      box-shadow:0 2px 6px rgba(0,0,0,0.25);
    }
    .flame {
      position:absolute;
      top:-28px;
      left:50%;
      transform:translateX(-50%);
      width:14px;
      height:18px;
      background: radial-gradient(circle at 30% 30%, #fff3b0 0%, #ffd25e 30%, #ff7a00 70%);
      border-radius:50% 50% 40% 40%;
      filter: drop-shadow(0 4px 6px rgba(255,130,60,0.2));
      animation: flicker 700ms infinite;
    }
    @keyframes flicker {
      0%{ transform:translateX(-50%) scaleY(1) }
      50%{ transform:translateX(-50%) scaleY(1.05) translateY(-1px) }
      100%{ transform:translateX(-50%) scaleY(1) }
    }

    /* Balloons floating in background */
    .balloon {
      position:absolute;
      width:56px;
      height:72px;
      border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow: 0 10px 25px rgba(2,6,23,0.5), inset -6px -8px 14px rgba(255,255,255,0.08);
      opacity:0.98;
      transform-origin:center bottom;
      animation-name: floatUp;
      animation-timing-function: ease-in-out;
      animation-iteration-count: infinite;
    }
    .balloon .shine {
      position:absolute;
      top:10%;
      right:12%;
      width:10px;height:12px;border-radius:50%;background:rgba(255,255,255,0.45);
      transform: rotate(-25deg);
      filter: blur(0.2px);
    }
    .balloon .string {
      position:absolute;
      bottom:-26px;
      left:50%;
      transform:translateX(-50%);
      width:2px;height:30px;
      background:linear-gradient(180deg, #ccc, #888);
      border-radius:2px;
      opacity:0.8;
    }

    @keyframes floatUp {
      0% { transform: translateY(0) rotate(-4deg) }
      50% { transform: translateY(-14vh) rotate(6deg) }
      100% { transform: translateY(0) rotate(-4deg) }
    }

    /* Confetti canvas */
    canvas.confetti {
      position:fixed; left:0; top:0; width:100%; height:100%; pointer-events:none; z-index:80;
    }

    /* Footer small text */
    .footer {
      position:absolute; bottom:16px; left:50%; transform:translateX(-50%); color: rgba(255,255,255,0.45); font-size:12px;
    }

    /* Responsive */
    @media (max-width:520px){
      .card{ width:92%; height:360px; padding:20px; }
      .title{ font-size:28px }
      .name{ font-size:36px }
      .cake{ width:120px; height:92px }
    }
  </style>
</head>
<body>
  <canvas class="confetti" id="confetti-canvas"></canvas>

  <div class="wrap" id="page">
    <!-- Balloons container (generated by JS) -->
    <div id="balloons" aria-hidden="true" style="position:absolute; inset:0; pointer-events:none; z-index:0;"></div>

    <!-- Card -->
    <div class="card" id="card" role="button" aria-pressed="false" tabindex="0" title="Click to open/close">
      <div class="greeting">
        <div class="small">A special day for</div>
        <h1 class="title">Happy Birthday</h1>
        <div id="nameEl" class="name">Friend</div>

        <p id="messageEl" class="message" style="display:none;">
          Wishing you a day filled with love, laughter and cake. May this year bring you joy and wonderful surprises!
        </p>

        <div class="cake" aria-hidden="true">
          <div class="plate"></div>
          <div class="tier" style="width:140px;height:76px;border-radius:12px;"></div>

          <div class="candle" style="left:50%; transform:translateX(-50%);"></div>
          <div class="flame" style="left:50%; transform:translateX(-50%);"></div>
        </div>

        <div class="open-hint" id="hint">Click the card to open & celebrate ðŸŽ‰</div>
      </div>
    </div>

    <div class="footer">Tip: add <code>#YourName</code> to the URL to personalize (e.g. <em>index.html#Asha</em>)</div>
  </div>

  <script>
    // Personalize from URL hash
    (function(){
      const nameEl = document.getElementById('nameEl');
      const m = decodeURIComponent((location.hash || '').replace('#','')).trim();
      if(m) nameEl.textContent = m;
    })();

    // Balloons generator
    (function makeBalloons(){
      const colors = ['#fb7185','#60a5fa','#facc15','#fb923c','#a78bfa','#f472b6'];
      const container = document.getElementById('balloons');
      const count = 14;
      for(let i=0;i<count;i++){
        const b = document.createElement('div');
        b.className = 'balloon';
        const left = Math.random() * 100;
        const scale = 0.6 + Math.random()*0.9;
        const duration = 14 + Math.random()*12;
        const delay = Math.random()*6;
        b.style.left = left + '%';
        b.style.bottom = (-10 - Math.random()*10)+'px';
        b.style.transform = 'translateY(0)';
        b.style.animationDuration = duration + 's';
        b.style.animationDelay = delay + 's';
        b.style.width = (50*scale)+'px';
        b.style.height = (64*scale)+'px';
        b.style.background = colors[Math.floor(Math.random()*colors.length)];
        b.style.zIndex = 0;
        b.style.opacity = 0.95;

        const shine = document.createElement('div');
        shine.className='shine';
        const str = document.createElement('div');
        str.className='string';

        b.appendChild(shine);
        b.appendChild(str);
        container.appendChild(b);
      }
    })();

    // Open/close card and confetti trigger
    (function(){
      const card = document.getElementById('card');
      const hint = document.getElementById('hint');
      const message = document.getElementById('messageEl');
      const nameEl = document.getElementById('nameEl');
      let open = false;

      function toggle(){
        open = !open;
        card.classList.toggle('open', open);
        card.setAttribute('aria-pressed', open? 'true' : 'false');
        message.style.display = open ? 'block' : 'none';
        hint.style.display = open ? 'none' : 'block';

        if(open){
          // Fire confetti burst
          fireConfettiBurst();
          // Slight pop animation
          card.animate([
            { transform: 'scale(1)' },
            { transform: 'scale(1.04)' },
            { transform: 'scale(1)' }
          ],{ duration: 420, easing:'cubic-bezier(.2,.9,.3,1)'});
        }
      }

      card.addEventListener('click', toggle);
      card.addEventListener('keydown', function(e){ if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggle(); } });

      // If name present show hint differently
      if(location.hash && location.hash.length>1){
        hint.textContent = "Click to open and celebrate ðŸŽ‰";
      }
    })();

    // CONFETTI: simple particle engine rendering to canvas
    (function(){
      const canvas = document.getElementById('confetti-canvas');
      const ctx = canvas.getContext('2d');
      let W = canvas.width = innerWidth;
      let H = canvas.height = innerHeight;
      const particles = [];

      function resize(){
        W = canvas.width = innerWidth;
        H = canvas.height = innerHeight;
      }
      window.addEventListener('resize', resize);

      function rand(min,max){ return Math.random()*(max-min)+min; }
      function createParticle(x,y,spread=200,clockwise=false){
        const size = rand(6,14);
        const angle = rand(-Math.PI/2 - 0.8, -Math.PI/2 + 0.8) + (Math.random()-0.5)*(spread/600);
        const speed = rand(3,12);
        const vx = Math.cos(angle) * speed * (clockwise?1:-1);
        const vy = Math.sin(angle) * speed;
        const colors = ['#ff7ab6','#ffd166','#60a5fa','#a78bfa','#4ade80','#fb923c'];
        const color = colors[Math.floor(Math.random()*colors.length)];
        const rotation = rand(0,Math.PI*2);
        const rotSpeed = rand(-0.12,0.12);
        particles.push({x,y,vx,vy,size,color,rotation,rotSpeed,ttl: Math.round(rand(60,140))});
      }

      let rafId;
      function step(){
        ctx.clearRect(0,0,W,H);
        for(let i=particles.length-1;i>=0;i--){
          const p = particles[i];
          // physics
          p.vy += 0.25; // gravity
          p.vx *= 0.995; p.vy *= 0.999;
          p.x += p.vx; p.y += p.vy;
          p.rotation += p.rotSpeed;
          p.ttl--;
          // draw
          ctx.save();
          ctx.translate(p.x,p.y);
          ctx.rotate(p.rotation);
          ctx.fillStyle = p.color;
          ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size*0.6);
          ctx.restore();

          // remove if offscreen or dead
          if(p.y > H + 60 || p.x < -60 || p.x > W + 60 || p.ttl <= 0){
            particles.splice(i,1);
          }
        }
        rafId = requestAnimationFrame(step);
      }
      // start loop
      step();

      // Public function to fire confetti
      window.fireConfettiBurst = function(){
        const cx = innerWidth/2;
        const cy = innerHeight/3;
        const count = 120;
        for(let i=0;i<count;i++){
          // spawn around center with some spread
          const x = cx + (Math.random()-0.5)*220;
          const y = cy + (Math.random()-0.5)*80;
          createParticle(x,y,300, Math.random() > 0.5);
        }
        // also small secondary bursts around edges
        setTimeout(()=>{
          for(let i=0;i<40;i++){
            createParticle(Math.random()*innerWidth, innerHeight*0.2 + Math.random()*40, 600, Math.random()>0.5);
          }
        },200);
      };

      // Clean up on page unload
      window.addEventListener('beforeunload', ()=> cancelAnimationFrame(rafId));
    })();

    // Optional: trigger a little confetti when page loads if hash present
    window.addEventListener('load', function(){
      if(location.hash && location.hash.length>1){
        // small celebratory burst
        setTimeout(()=> window.fireConfettiBurst(), 400);
      }
    });
  </script>
</body>
</html>
